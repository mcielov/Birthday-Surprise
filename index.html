<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Happy Birthday, Dodi!</title>

  <!-- FONTS -->
  <style>
    @font-face {
      font-family: 'Genty';
      src: url('Genty.woff2') format('woff2');
    }

    @import url('https://fonts.googleapis.com/css2?family=Quicksand&display=swap');

    body {
      margin: 0;
      font-family: 'Quicksand', sans-serif;
      background: url('background.png') no-repeat center center fixed;
      background-size: cover;
      color: #333;
    }

    h1, h2 {
      font-family: 'Genty', cursive;
    }

    .opener {
      height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      background-color: rgba(255,255,255,0.8);
      text-align: center;
      padding: 20px;
    }

    .heart {
      font-size: 50px;
      cursor: pointer;
      color: red;
      margin-top: 20px;
    }

    #main-content {
      display: none;
      padding: 20px;
    }

    #puzzle-area {
      width: 600px;
      height: 600px;
      border: 2px dashed #ccc;
      margin-bottom: 20px;
    }

    #reference {
      max-width: 300px;
    }

    #puzzle-wrapper {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
      justify-content: center;
    }

    #letter {
      display: none;
      background-color: rgba(255, 255, 255, 0.95);
      padding: 20px;
      max-width: 600px;
      margin: 40px auto;
      border-radius: 15px;
      box-shadow: 0 0 10px rgba(0,0,0,0.3);
      animation: fadeIn 2s ease-in-out forwards;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.9); }
      to { opacity: 1; transform: scale(1); }
    }
  </style>
</head>
<body>
  <!-- AUDIO -->
  <audio id="bg-music" autoplay loop>
    <source src="spring-snow-10cm.mp3" type="audio/mpeg">
  </audio>

  <!-- Opener Section -->
  <div class="opener" id="opener">
    <h1>You said we're the perfect match...</h1>
    <h2>Let's see how we fit together.</h2>
    <div class="heart" onclick="startPuzzle()">‚ù§Ô∏è</div>
  </div>

  <!-- Main Puzzle Section -->
  <div id="main-content">
    <div id="puzzle-wrapper">
      <canvas id="puzzle-area"></canvas>
      <div>
        <h2>Reference Photo</h2>
        <img id="reference" src="puzzle.jpg" alt="Reference" />
      </div>
    </div>

    <div id="letter">
      <h2>Happy Birthday, Dodi! üéÇ</h2>
      <p>
        I hope this little surprise did, in fact, surprise you and put a smile on your face.<br>
        I am beyond grateful that you were created to grace this bleak world with your presence.<br>
        I still meant what I said to Mita back in December, that you're the greatest gift I've ever received.<br>
        I love you more than you could ever know. You are light and love and everything good there is to exist in this lifetime.<br>
        May you live out this new year of your life with happiness, good health, clarity, and love from the people who cherish and support you.<br><br>
        It only took me 2 days to create this, but it was enough to drive me insane.<br>
        So to think that you do this every day, for hours on end, gave me a renewed sense of respect for your craft and the time and effort you dedicate to it.<br>
        You are an amazing coder/programmer/developer/person all around.<br>
        Thank you for all your sacrifices, patience, and understanding. And above all else, thank you for being you. Never change. Continue aspiring towards big ideas.<br>
        I'll always be here to give you hugs, kisses, and hearty meals to keep you going.<br><br>
        I love you so much, Hertz. Happy Birthday, sweetheart.<br><br>
        Love, <br>
        Momi
      </p>
    </div>
  </div>

  <!-- Headbreaker Script -->
  <script src="https://flbulgarelli.github.io/headbreaker/js/headbreaker.js"></script>
  <script>
    function startPuzzle() {
      document.getElementById('opener').style.display = 'none';
      document.getElementById('main-content').style.display = 'block';

      const music = document.getElementById('bg-music');
      music.play().catch((e) => console.log('Autoplay error:', e));

      const board = new headbreaker.Board('puzzle-area', {
        width: 600,
        height: 600,
        proximity: 25,
        borderFill: 1,
        strokeWidth: 2,
        lineSoftness: 0.18,
        image: 'puzzle.jpg',
        rows: 3,
        columns: 4,
        fixed: false,
        debug: false
      });

      const img = new Image();
      img.src = 'puzzle.jpg';
      img.onload = function () {
        board.setImage(img);
        board.shuffle();
      };

      board.on('complete', function () {
        showCelebration();
      });
    }

    function showCelebration() {
      document.getElementById('letter').style.display = 'block';
    }
  </script>
</body>
</html>
